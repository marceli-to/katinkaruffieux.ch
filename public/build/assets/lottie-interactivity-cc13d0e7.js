var $=(E,d)=>()=>(d||E((d={exports:{}}).exports,d),d.exports);var ee=$((Y,J)=>{(function(E,d){typeof Y=="object"&&typeof J<"u"?d(Y):typeof define=="function"&&define.amd?define(["exports"],d):d((E=E||self).LottieInteractivity={})})(globalThis,function(E){function d(s){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(s)}function K(s,r){if(!(s instanceof r))throw new TypeError("Cannot call a class as a function")}function Q(s,r){for(var p=0;p<r.length;p++){var e=r[p];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(s,e.key,e)}}function q(s,r){if(s==null)return{};var p,e,y=function(u,l){if(u==null)return{};var o,g,C={},F=Object.keys(u);for(g=0;g<F.length;g++)o=F[g],l.indexOf(o)>=0||(C[o]=u[o]);return C}(s,r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(s);for(e=0;e<c.length;e++)p=c[e],r.indexOf(p)>=0||Object.prototype.propertyIsEnumerable.call(s,p)&&(y[p]=s[p])}return y}function t(s,r){var p=r.get(s);if(!p)throw new TypeError("attempted to get private field on non-instance");return p.get?p.get.call(s):p.value}var U={player:"lottie-player"},H="[lottieInteractivity]:",B=function(){function s(){var e=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:U,c=y.actions,u=y.container,l=y.mode,o=y.player,g=q(y,["actions","container","mode","player"]);if(K(this,s),V.set(this,{writable:!0,value:function(){if(e.player){var n=function(){e.player.addEventListener("enterFrame",t(e,W)),e.container.addEventListener("mouseenter",t(e,b)),e.container.addEventListener("mouseleave",t(e,k)),e.container.addEventListener("touchstart",t(e,b),{passive:!0}),e.container.addEventListener("touchend",t(e,k),{passive:!0})};e.stateHandler.set("loop",function(){e.actions[e.interactionIdx].loop?e.player.loop=parseInt(e.actions[e.interactionIdx].loop)-1:e.player.loop=!0,e.player.autoplay=!0}),e.stateHandler.set("autoplay",function(){e.player.loop=!1,e.player.autoplay=!0}),e.stateHandler.set("click",function(){e.player.loop=!1,e.player.autoplay=!1,e.container.addEventListener("click",t(e,w))}),e.stateHandler.set("hover",function(){e.player.loop=!1,e.player.autoplay=!1,e.container.addEventListener("mouseenter",t(e,w)),e.container.addEventListener("touchstart",t(e,w),{passive:!0})}),e.transitionHandler.set("click",function(){e.container.addEventListener("click",t(e,h))}),e.transitionHandler.set("hover",function(){e.container.addEventListener("mouseenter",t(e,h)),e.container.addEventListener("touchstart",t(e,h),{passive:!0})}),e.transitionHandler.set("hold",n),e.transitionHandler.set("pauseHold",n),e.transitionHandler.set("repeat",function(){e.player.loop=!0,e.player.autoplay=!0,e.player.addEventListener("loopComplete",function i(){t(e,X).call(e,{handler:i})})}),e.transitionHandler.set("onComplete",function(){e.actions[e.interactionIdx].state==="loop"?e.player.addEventListener("loopComplete",t(e,P)):e.player.addEventListener("complete",t(e,P))}),e.transitionHandler.set("seek",function(){e.player.stop(),e.player.addEventListener("enterFrame",t(e,O)),e.container.addEventListener("mousemove",t(e,I)),e.container.addEventListener("touchmove",t(e,A),{passive:!1}),e.container.addEventListener("mouseout",t(e,x))})}}}),w.set(this,{writable:!0,value:function(){var n=e.actions[e.interactionIdx].forceFlag;n||e.player.isPaused!==!0?n&&t(e,j).call(e,!0):t(e,j).call(e,!0)}}),D.set(this,{writable:!0,value:function(){e.clickCounter===0?(e.player.play(),e.clickCounter++):(e.clickCounter++,e.player.setDirection(-1*e.player.playDirection),e.player.play())}}),h.set(this,{writable:!0,value:function(){var n=e.actions[e.interactionIdx].forceFlag;if(e.mode==="chain"){if(e.actions[e.interactionIdx].count){var i=parseInt(e.actions[e.interactionIdx].count);if(e.clickCounter<i-1)return void(e.clickCounter+=1)}return e.clickCounter=0,e.container.removeEventListener("click",t(e,h)),e.container.removeEventListener("mouseenter",t(e,h)),void t(e,S).call(e)}n||e.player.isPaused!==!0?n&&e.player.goToAndPlay(0,!0):e.player.goToAndPlay(0,!0)}}),I.set(this,{writable:!0,value:function(n){t(e,T).call(e,n.clientX,n.clientY)}}),A.set(this,{writable:!0,value:function(n){n.cancelable&&n.preventDefault(),t(e,T).call(e,n.touches[0].clientX,n.touches[0].clientY)}}),x.set(this,{writable:!0,value:function(){t(e,T).call(e,-1,-1)}}),P.set(this,{writable:!0,value:function(){e.actions[e.interactionIdx].state==="loop"?e.player.removeEventListener("loopComplete",t(e,P)):e.player.removeEventListener("complete",t(e,P)),t(e,S).call(e)}}),X.set(this,{writable:!0,value:function(n){var i=n.handler,v=1;e.actions[e.interactionIdx].repeat&&(v=e.actions[e.interactionIdx].repeat),e.playCounter>=v-1?(e.playCounter=0,e.player.removeEventListener("loopComplete",i),e.player.loop=!1,e.player.autoplay=!1,t(e,S).call(e)):e.playCounter+=1}}),O.set(this,{writable:!0,value:function(){var n=e.actions[e.interactionIdx].frames;n&&e.player.currentFrame>=parseInt(n[1])-1&&(e.player.removeEventListener("enterFrame",t(e,O)),e.container.removeEventListener("mousemove",t(e,I)),e.container.removeEventListener("mouseout",t(e,x)),setTimeout(t(e,S),0))}}),W.set(this,{writable:!0,value:function(){var n=e.actions[e.interactionIdx].frames;(n&&e.player.currentFrame>=n[1]||e.player.currentFrame>=e.player.totalFrames-1)&&(e.player.removeEventListener("enterFrame",t(e,W)),e.container.removeEventListener("mouseenter",t(e,b)),e.container.removeEventListener("mouseleave",t(e,k)),e.player.pause(),t(e,S).call(e))}}),b.set(this,{writable:!0,value:function(){e.player.playDirection!==-1&&e.player.currentFrame!==0&&e.actions[e.interactionIdx].transition!=="pauseHold"&&e.actions[0].type!=="pauseHold"||(e.player.setDirection(1),e.player.play())}}),k.set(this,{writable:!0,value:function(){e.actions[e.interactionIdx].transition==="hold"||e.actions[0].type==="hold"?(e.player.setDirection(-1),e.player.play()):e.actions[e.interactionIdx].transition!=="pauseHold"&&e.actions[0].type!=="pauseHold"||e.player.pause()}}),_.set(this,{writable:!0,value:function(){var n=e.actions[e.interactionIdx].state;n!=="hover"&&n!=="click"||(e.container.removeEventListener("click",t(e,w)),e.container.removeEventListener("mouseenter",t(e,w)))}}),S.set(this,{writable:!0,value:function(){var n=e.interactionIdx;t(e,_).call(e);var i=e.actions[e.interactionIdx].jumpTo;i?i>=0&&i<e.actions.length?(e.interactionIdx=i,t(e,L).call(e,{ignorePath:!1})):(e.interactionIdx=0,e.player.goToAndStop(0,!0),t(e,L).call(e,{ignorePath:!1})):(e.interactionIdx++,e.interactionIdx>=e.actions.length?e.actions[e.actions.length-1].reset?(e.interactionIdx=0,e.player.goToAndStop(0,!0),t(e,L).call(e,{ignorePath:!1})):(e.interactionIdx=e.actions.length-1,t(e,L).call(e,{ignorePath:!1})):t(e,L).call(e,{ignorePath:!1})),e.container.dispatchEvent(new CustomEvent("transition",{bubbles:!0,composed:!0,detail:{oldIndex:n,newIndex:e.interactionIdx}}))}}),j.set(this,{writable:!0,value:function(n){var i=e.actions[e.interactionIdx].frames;if(!i)return e.player.resetSegments(!0),void e.player.goToAndPlay(0,!0);typeof i=="string"?e.player.goToAndPlay(i,n):e.player.playSegments(i,n)}}),z.set(this,{writable:!0,value:function(){var n=e.actions[e.interactionIdx].path;if(!n)if(d(e.enteredPlayer)==="object"&&e.enteredPlayer.constructor.name==="AnimationItem"){if(n=e.enteredPlayer,e.player===n)return void t(e,L).call(e,{ignorePath:!0})}else{var i=(n=e.loadedAnimation).substr(n.lastIndexOf("/")+1);if(i=i.substr(0,i.lastIndexOf(".json")),e.player.fileName===i)return void t(e,L).call(e,{ignorePath:!0})}var v=e.container.getBoundingClientRect(),a="width: "+v.width+"px !important; height: "+v.height+"px !important; background: "+e.container.style.background;if(e.container.setAttribute("style",a),d(e.enteredPlayer)!=="object"||e.enteredPlayer.constructor.name!=="AnimationItem"){if(typeof e.enteredPlayer=="string"){var m=document.querySelector(e.enteredPlayer);m&&m.nodeName==="LOTTIE-PLAYER"&&(e.attachedListeners||(m.addEventListener("ready",function(){e.container.style.width="",e.container.style.height=""}),m.addEventListener("load",function(){e.player=m.getLottie(),t(e,L).call(e,{ignorePath:!0})}),e.attachedListeners=!0),m.load(n))}else e.enteredPlayer instanceof HTMLElement&&e.enteredPlayer.nodeName==="LOTTIE-PLAYER"&&(e.attachedListeners||(e.enteredPlayer.addEventListener("ready",function(){e.container.style.width="",e.container.style.height=""}),e.enteredPlayer.addEventListener("load",function(){e.player=e.enteredPlayer.getLottie(),t(e,L).call(e,{ignorePath:!0})}),e.attachedListeners=!0),e.enteredPlayer.load(n));if(!e.player)throw new Error("".concat(H," Specified player is invalid."),e.enteredPlayer)}else{if(!window.lottie)throw new Error("".concat(H," A Lottie player is required."));e.stop(),e.player.destroy(),e.container.innerHTML="",d(n)==="object"&&n.constructor.name==="AnimationItem"?e.player=window.lottie.loadAnimation({loop:!1,autoplay:!1,animationData:n.animationData,container:e.container}):e.player=window.lottie.loadAnimation({loop:!1,autoplay:!1,path:n,container:e.container}),e.player.addEventListener("DOMLoaded",function(){e.container.style.width="",e.container.style.height="",t(e,L).call(e,{ignorePath:!0})})}e.clickCounter=0,e.playCounter=0}}),L.set(this,{writable:!0,value:function(n){var i=n.ignorePath,v=e.actions[e.interactionIdx].state,a=e.actions[e.interactionIdx].transition,m=e.actions[e.interactionIdx].path,M=e.stateHandler.get(v),N=e.transitionHandler.get(a),f=e.actions[e.interactionIdx].speed?e.actions[e.interactionIdx].speed:1,Z=e.actions[e.interactionIdx].delay?e.actions[e.interactionIdx].delay:0;i||!(m||e.actions[e.actions.length-1].reset&&e.interactionIdx===0)?setTimeout(function(){M?M.call():v==="none"&&(e.player.loop=!1,e.player.autoplay=!1),N&&N.call(),e.player.autoplay&&(e.player.resetSegments(!0),t(e,j).call(e,!0)),e.player.setSpeed(f)},Z):t(e,z).call(e)}}),T.set(this,{writable:!0,value:function(n,i){if(n!==-1&&i!==-1){var v=e.getContainerCursorPosition(n,i);n=v.x,i=v.y}var a=e.actions.find(function(N){var f=N.position;if(f){if(Array.isArray(f.x)&&Array.isArray(f.y))return n>=f.x[0]&&n<=f.x[1]&&i>=f.y[0]&&i<=f.y[1];if(!Number.isNaN(f.x)&&!Number.isNaN(f.y))return n===f.x&&i===f.y}return!1});if(a)if(a.type==="seek"||a.transition==="seek"){var m=(n-a.position.x[0])/(a.position.x[1]-a.position.x[0]),M=(i-a.position.y[0])/(a.position.y[1]-a.position.y[0]);e.player.playSegments(a.frames,!0),a.position.y[0]<0&&a.position.y[1]>1?e.player.goToAndStop(Math.floor(m*e.player.totalFrames),!0):e.player.goToAndStop(Math.ceil((m+M)/2*e.player.totalFrames),!0)}else a.type==="loop"?e.player.playSegments(a.frames,!0):a.type==="play"?(e.player.isPaused===!0&&e.player.resetSegments(),e.player.playSegments(a.frames)):a.type==="stop"&&(e.player.resetSegments(!0),e.player.goToAndStop(a.frames[0],!0))}}),R.set(this,{writable:!0,value:function(){var n=e.getContainerVisibility(),i=e.actions.find(function(m){var M=m.visibility;return n>=M[0]&&n<=M[1]});if(i)if(i.type==="seek"){var v=i.frames[0],a=i.frames.length==2?i.frames[1]:e.player.totalFrames-1;e.assignedSegment!==null&&(e.player.resetSegments(!0),e.assignedSegment=null),e.player.goToAndStop(v+Math.round((n-i.visibility[0])/(i.visibility[1]-i.visibility[0])*(a-v)),!0)}else i.type==="loop"?(e.player.loop=!0,(e.assignedSegment===null||e.assignedSegment!==i.frames||e.player.isPaused===!0)&&(e.player.playSegments(i.frames,!0),e.assignedSegment=i.frames)):i.type==="play"?e.scrolledAndPlayed||(e.scrolledAndPlayed=!0,e.player.resetSegments(!0),i.frames?e.player.playSegments(i.frames,!0):e.player.play()):i.type==="stop"&&e.player.goToAndStop(i.frames[0],!0)}}),this.enteredPlayer=o,d(o)!=="object"||o.constructor.name!=="AnimationItem"){if(typeof o=="string"){var C=document.querySelector(o);C&&C.nodeName==="LOTTIE-PLAYER"&&(o=C.getLottie())}else o instanceof HTMLElement&&o.nodeName==="LOTTIE-PLAYER"&&(o=o.getLottie());if(!o){var F=H+"Specified player:"+o+" is invalid.";throw new Error(F)}}typeof u=="string"&&(u=document.querySelector(u)),u||(u=o.wrapper),this.player=o,this.loadedAnimation=this.player.path+this.player.fileName+".json",this.attachedListeners=!1,this.container=u,this.mode=l,this.actions=c,this.options=g,this.assignedSegment=null,this.scrolledAndPlayed=!1,this.interactionIdx=0,this.clickCounter=0,this.playCounter=0,this.stateHandler=new Map,this.transitionHandler=new Map}var r,p;return r=s,(p=[{key:"getContainerVisibility",value:function(){var e=this.container.getBoundingClientRect(),y=e.top,c=e.height;return(window.innerHeight-y)/(window.innerHeight+c)}},{key:"getContainerCursorPosition",value:function(e,y){var c=this.container.getBoundingClientRect(),u=c.top;return{x:(e-c.left)/c.width,y:(y-u)/c.height}}},{key:"initScrollMode",value:function(){this.player.stop(),window.addEventListener("scroll",t(this,R))}},{key:"initCursorMode",value:function(){this.actions&&this.actions.length===1?this.actions[0].type==="click"?(this.player.loop=!1,this.player.stop(),this.container.addEventListener("click",t(this,h))):this.actions[0].type==="hover"?(this.player.loop=!1,this.player.stop(),this.container.addEventListener("mouseenter",t(this,h)),this.container.addEventListener("touchstart",t(this,h),{passive:!0})):this.actions[0].type==="toggle"?(this.player.loop=!1,this.player.stop(),this.container.addEventListener("click",t(this,D))):this.actions[0].type==="hold"||this.actions[0].type==="pauseHold"?(this.container.addEventListener("mouseenter",t(this,b)),this.container.addEventListener("mouseleave",t(this,k)),this.container.addEventListener("touchstart",t(this,b),{passive:!0}),this.container.addEventListener("touchend",t(this,k),{passive:!0})):this.actions[0].type==="seek"&&(this.player.loop=!0,this.player.stop(),this.container.addEventListener("mousemove",t(this,I)),this.container.addEventListener("touchmove",t(this,A),{passive:!1}),this.container.addEventListener("mouseout",t(this,x))):(this.player.loop=!0,this.player.stop(),this.container.addEventListener("mousemove",t(this,I)),this.container.addEventListener("mouseleave",t(this,x)),t(this,T).call(this,-1,-1))}},{key:"initChainMode",value:function(){t(this,V).call(this),this.player.loop=!1,this.player.stop(),t(this,L).call(this,{ignorePath:!1})}},{key:"start",value:function(){var e=this;this.mode==="scroll"?this.player.isLoaded?this.initScrollMode():this.player.addEventListener("DOMLoaded",function(){e.initScrollMode()}):this.mode==="cursor"?this.player.isLoaded?this.initCursorMode():this.player.addEventListener("DOMLoaded",function(){e.initCursorMode()}):this.mode==="chain"&&(this.player.isLoaded?this.initChainMode():this.player.addEventListener("DOMLoaded",function(){e.initChainMode()}))}},{key:"redefineOptions",value:function(e){var y=e.actions,c=e.container,u=e.mode,l=e.player,o=q(e,["actions","container","mode","player"]);if(this.stop(),this.player.stop(),this.enteredPlayer=l,d(l)!=="object"||l.constructor.name!=="AnimationItem"){if(typeof l=="string"){var g=document.querySelector(l);g&&g.nodeName==="LOTTIE-PLAYER"&&(l=g.getLottie())}else l instanceof HTMLElement&&l.nodeName==="LOTTIE-PLAYER"&&(l=l.getLottie());if(!l)throw new Error(H+"Specified player:"+l+" is invalid.",l)}typeof c=="string"&&(c=document.querySelector(c)),c||(c=l.wrapper),this.player=l,this.loadedAnimation=this.player.path+this.player.fileName+".json",this.attachedListeners=!1,this.container=c,this.mode=u,this.actions=y,this.options=o,this.assignedSegment=null,this.scrolledAndPlayed=!1,this.interactionIdx=0,this.clickCounter=0,this.playCounter=0,this.stateHandler=new Map,this.transitionHandler=new Map,this.start()}},{key:"stop",value:function(){this.mode==="scroll"&&window.removeEventListener("scroll",t(this,R)),this.mode==="cursor"&&(this.container.removeEventListener("click",t(this,h)),this.container.removeEventListener("click",t(this,D)),this.container.removeEventListener("mouseenter",t(this,h)),this.container.removeEventListener("touchstart",t(this,h)),this.container.removeEventListener("touchmove",t(this,A)),this.container.removeEventListener("mousemove",t(this,I)),this.container.removeEventListener("mouseleave",t(this,x)),this.container.removeEventListener("touchstart",t(this,b)),this.container.removeEventListener("touchend",t(this,k))),this.mode==="chain"&&(this.container.removeEventListener("click",t(this,h)),this.container.removeEventListener("click",t(this,w)),this.container.removeEventListener("mouseenter",t(this,h)),this.container.removeEventListener("touchstart",t(this,h)),this.container.removeEventListener("touchmove",t(this,A)),this.container.removeEventListener("mouseenter",t(this,w)),this.container.removeEventListener("touchstart",t(this,w)),this.container.removeEventListener("mouseenter",t(this,b)),this.container.removeEventListener("touchstart",t(this,b)),this.container.removeEventListener("mouseleave",t(this,k)),this.container.removeEventListener("mousemove",t(this,I)),this.container.removeEventListener("mouseout",t(this,x)),this.container.removeEventListener("touchend",t(this,k)),this.player.removeEventListener("loopComplete",t(this,P)),this.player.removeEventListener("complete",t(this,P)),this.player.removeEventListener("enterFrame",t(this,O)),this.player.removeEventListener("enterFrame",t(this,W)))}}])&&Q(r.prototype,p),s}(),V=new WeakMap,w=new WeakMap,D=new WeakMap,h=new WeakMap,I=new WeakMap,A=new WeakMap,x=new WeakMap,P=new WeakMap,X=new WeakMap,O=new WeakMap,W=new WeakMap,b=new WeakMap,k=new WeakMap,_=new WeakMap,S=new WeakMap,j=new WeakMap,z=new WeakMap,L=new WeakMap,T=new WeakMap,R=new WeakMap,G=function(s){var r=new B(s);return r.start(),r};E.LottieInteractivity=B,E.create=G,E.default=G,Object.defineProperty(E,"__esModule",{value:!0})})});export default ee();
